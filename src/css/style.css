/* ===================================================================
   Flexible Data Reporter — Styled with Geotab Zenith Design Tokens
   Ref: @geotab/zenith v3.5.0 — :root custom properties
   =================================================================== */

/* ---- Zenith Font (Google Fonts CDN fallback since we can't bundle woff) ---- */
@import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,400&family=Roboto+Mono:wght@400&display=swap');

/* ---- Zenith Design Tokens ---- */
:root {
  /* Text */
  --text-primary: #1F2833;
  --text-secondary: #4E677E;
  --text-placeholder: #8DA4B9;
  --text-hyperlink: #005AA8;
  --text-error-message: #C51A11;
  --text-button-disabled: #C0CCD8;
  --text-reverse-primary: #FFFFFF;

  /* Backgrounds */
  --backgrounds-main: #FFFFFF;
  --backgrounds-content-0: #F9FAFB;
  --backgrounds-content-1: #F2F5F7;
  --backgrounds-content-2: #D9E1E8;
  --backgrounds-hover: #E6EBEF;
  --backgrounds-field-disabled: #E6EBEF;
  --backgrounds-overlay: rgba(31, 40, 51, 0.4);
  --backgrounds-primary-brand: #25477B;

  /* Borders */
  --borders-general: #C0CCD8;
  --borders-secondary: #748FAA;
  --borders-form-field--hover: #748FAA;
  --borders-form-field--active: #0078D3;
  --borders-form-field--error: #C51A11;

  /* Actions */
  --action-primary--default: #0078D3;
  --action-primary--hover: #005AA8;
  --action-primary--active: #004080;
  --action-secondary--default: #4E677E;
  --action-secondary--hover: #3E5265;
  --action-secondary--active: #2F3D4C;
  --action-destructive--default: #C51A11;
  --action-tertiary--hover: #E6EBEF;

  /* Accents */
  --accents-warning--main: #FEF7ED;
  --accents-warning--detail: #59480D;
  --accents-error--main: #FFECEB;
  --accents-error--detail: #A01F0E;
  --accents-success--main: #EDFEF2;
  --accents-success--detail: #2B6436;
  --accents-general--main: #EBF6FF;
  --accents-general--detail: #25477B;

  /* Data / Chart categorical palette */
  --data--categorical-light-blue: #3CCDE5;
  --data--categorical-blue: #428AFF;
  --data--categorical-purple: #8256E5;
  --data--categorical-green: #06C989;
  --data--categorical-orange: #F98C41;
  --data--categorical-yellow: #F5BD60;
  --data--categorical-red: #E56A6A;
  --data--categorical-grey: #8A94A2;

  /* Fonts */
  --main-font: Roboto, "Segoe UI", Segoe, "Helvetica Neue", Helvetica, sans-serif;
  --main-font-data: "Roboto Mono", "Segoe UI", Segoe, "Helvetica Neue", Helvetica, sans-serif;
}

/* ---- Reset within add-in container ---- */
#flexDataReporter {
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 400;
  color: var(--text-primary);
  line-height: 20px;
  letter-spacing: 0.16px;
  padding: 24px 32px;
  max-width: 1400px;
}

#flexDataReporter *,
#flexDataReporter *::before,
#flexDataReporter *::after {
  box-sizing: border-box;
}

/* ---- Zenith heading-04 / heading-s-500 ---- */
.fdr-panel-title {
  font-family: var(--main-font);
  font-size: 16px;
  font-weight: 500;
  line-height: 24px;
  letter-spacing: 0;
  color: var(--text-primary);
  margin: 0 0 16px 0;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--borders-general);
}

/* ============ Panels (Zenith card style) ============ */

.fdr-panel {
  background: var(--backgrounds-main);
  border: 1px solid var(--borders-general);
  border-radius: 8px;
  box-shadow: 0 1px 2px rgba(31, 40, 51, 0.08);
  margin-bottom: 20px;
  padding: 24px;
}

/* ============ Configure Panel ============ */

/* Section sub-label — Zenith heading-05 / heading-xs-500 */
.fdr-section-label {
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 500;
  line-height: 20px;
  color: var(--text-primary);
  margin-bottom: 8px;
}

/* Category checkboxes — chip-style toggles */
.fdr-categories {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 20px;
}

.fdr-categories label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  color: var(--text-primary);
  padding: 6px 12px;
  border: 1px solid var(--borders-general);
  border-radius: 20px;
  background: var(--backgrounds-main);
  transition: background 0.15s, border-color 0.15s;
  user-select: none;
}

.fdr-categories label:hover {
  background: var(--accents-general--main);
  border-color: var(--action-primary--default);
}

.fdr-categories label:has(input:checked) {
  background: var(--accents-general--main);
  border-color: var(--action-primary--default);
  color: var(--action-primary--default);
  font-weight: 500;
}

.fdr-categories input[type="checkbox"] {
  accent-color: var(--action-primary--default);
  width: 16px;
  height: 16px;
}

/* Column pickers */
.fdr-column-pickers {
  margin-bottom: 20px;
}

.fdr-column-group {
  margin-bottom: 12px;
  padding: 16px;
  background: var(--backgrounds-content-0);
  border: 1px solid var(--borders-general);
  border-radius: 8px;
}

.fdr-column-group-title {
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 500;
  color: var(--accents-general--detail);
  margin-bottom: 10px;
}

.fdr-column-group .fdr-columns {
  display: flex;
  flex-wrap: wrap;
  gap: 4px 20px;
}

.fdr-column-group .fdr-columns label {
  font-family: var(--main-font);
  font-size: 12px;
  font-weight: 400;
  line-height: 16px;
  letter-spacing: 0.32px;
  color: var(--text-primary);
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  padding: 4px 0;
}

.fdr-column-group .fdr-columns input[type="checkbox"] {
  accent-color: var(--action-primary--default);
  width: 14px;
  height: 14px;
}

/* Filters row */
.fdr-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  align-items: flex-end;
  margin-bottom: 20px;
}

.fdr-filter-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* Zenith label-01 / body-label-400 */
.fdr-filter-group label,
.fdr-diagnostic-picker label,
.fdr-chart-controls label {
  font-family: var(--main-font);
  font-size: 12px;
  font-weight: 400;
  line-height: 16px;
  letter-spacing: 0.32px;
  color: var(--text-secondary);
}

/* Zenith form field inputs */
.fdr-filter-group input,
.fdr-filter-group select,
.fdr-diagnostic-picker select,
.fdr-chart-controls select,
.fdr-search {
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  padding: 8px 12px;
  border: 1px solid var(--borders-general);
  border-radius: 4px;
  background: var(--backgrounds-main);
  color: var(--text-primary);
  outline: none;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.fdr-filter-group input:hover,
.fdr-filter-group select:hover,
.fdr-search:hover {
  border-color: var(--borders-form-field--hover);
}

.fdr-filter-group input:focus,
.fdr-filter-group select:focus,
.fdr-diagnostic-picker select:focus,
.fdr-search:focus {
  border-color: var(--borders-form-field--active);
  box-shadow: 0 0 0 2px rgba(0, 120, 211, 0.2);
}

/* Diagnostic picker */
.fdr-diagnostic-picker {
  display: none;
  margin-bottom: 20px;
  padding: 16px;
  background: var(--backgrounds-content-0);
  border: 1px solid var(--borders-general);
  border-radius: 8px;
}

.fdr-diagnostic-picker.visible {
  display: block;
}

.fdr-diagnostic-picker select {
  min-width: 320px;
  margin-top: 4px;
}

/* ============ Buttons (Zenith-aligned) ============ */

.fdr-btn {
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 500;
  line-height: 20px;
  padding: 8px 24px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.fdr-btn:disabled {
  background: var(--backgrounds-field-disabled);
  color: var(--text-button-disabled);
  cursor: not-allowed;
}

/* Primary — Zenith action-primary */
.fdr-btn-primary {
  background: var(--action-primary--default);
  color: var(--text-reverse-primary);
}

.fdr-btn-primary:hover:not(:disabled) {
  background: var(--action-primary--hover);
}

.fdr-btn-primary:active:not(:disabled) {
  background: var(--action-primary--active);
}

/* Secondary — Zenith action-secondary */
.fdr-btn-secondary {
  background: transparent;
  color: var(--action-secondary--default);
  border: 1px solid var(--borders-general);
}

.fdr-btn-secondary:hover:not(:disabled) {
  background: var(--action-tertiary--hover);
  color: var(--action-secondary--hover);
}

/* Success — uses Zenith success accent */
.fdr-btn-success {
  background: var(--accents-success--detail);
  color: var(--text-reverse-primary);
}

.fdr-btn-success:hover:not(:disabled) {
  background: #236E32;
}

.fdr-actions {
  display: flex;
  gap: 12px;
  align-items: center;
}

/* ============ Status / Loading ============ */

.fdr-status {
  font-family: var(--main-font);
  font-size: 14px;
  color: var(--text-secondary);
  margin-left: 12px;
}

.fdr-status.error {
  color: var(--text-error-message);
  font-weight: 500;
}

.fdr-spinner {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid var(--borders-general);
  border-top-color: var(--action-primary--default);
  border-radius: 50%;
  animation: fdr-spin 0.6s linear infinite;
  vertical-align: middle;
  margin-right: 8px;
}

@keyframes fdr-spin {
  to { transform: rotate(360deg); }
}

/* ============ Results Panel ============ */

.fdr-results {
  display: none;
}

.fdr-results.visible {
  display: block;
}

/* Tabs — Zenith tab-bar style */
.fdr-tabs {
  display: flex;
  gap: 0;
  border-bottom: 1px solid var(--borders-general);
  margin-bottom: 16px;
}

.fdr-tab {
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 500;
  line-height: 20px;
  padding: 10px 20px;
  border: none;
  background: none;
  color: var(--text-secondary);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
  transition: color 0.15s, border-color 0.15s;
}

.fdr-tab:hover {
  color: var(--text-primary);
  background: var(--action-tertiary--hover);
}

.fdr-tab.active {
  color: var(--action-primary--default);
  border-bottom-color: var(--action-primary--default);
}

.fdr-tab-count {
  font-weight: 400;
  font-size: 12px;
  color: var(--text-secondary);
  margin-left: 6px;
}

/* Table toolbar */
.fdr-table-toolbar {
  display: flex;
  gap: 12px;
  align-items: center;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.fdr-search {
  width: 240px;
}

/* ============ Data Table (Zenith table style) ============ */

.fdr-table-wrap {
  overflow-x: auto;
  margin-bottom: 12px;
  border: 1px solid var(--borders-general);
  border-radius: 8px;
}

.fdr-table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--main-font);
  font-size: 14px;
  line-height: 20px;
}

.fdr-table thead th {
  background: var(--backgrounds-content-1);
  font-weight: 500;
  font-size: 12px;
  line-height: 16px;
  letter-spacing: 0.32px;
  text-align: left;
  padding: 10px 16px;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--borders-general);
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  position: relative;
}

.fdr-table thead th:hover {
  background: var(--backgrounds-hover);
}

.fdr-table thead th .sort-arrow {
  font-size: 10px;
  margin-left: 4px;
  color: var(--text-placeholder);
}

.fdr-table thead th .sort-arrow.asc::after {
  content: '\25B2';
  color: var(--action-primary--default);
}

.fdr-table thead th .sort-arrow.desc::after {
  content: '\25BC';
  color: var(--action-primary--default);
}

.fdr-table tbody td {
  padding: 10px 16px;
  border-bottom: 1px solid var(--backgrounds-content-1);
  white-space: nowrap;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-primary);
  font-family: var(--main-font-data);
  font-size: 13px;
}

.fdr-table tbody tr:hover {
  background: var(--accents-general--main);
}

.fdr-table tbody tr:nth-child(even) {
  background: var(--backgrounds-content-0);
}

.fdr-table tbody tr:nth-child(even):hover {
  background: var(--accents-general--main);
}

/* ============ Pagination ============ */

.fdr-pagination {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
  font-family: var(--main-font);
  font-size: 14px;
  color: var(--text-secondary);
  padding: 8px 0;
}

.fdr-pagination button {
  font-family: var(--main-font);
  font-size: 14px;
  font-weight: 500;
  padding: 6px 16px;
  border: 1px solid var(--borders-general);
  border-radius: 4px;
  background: var(--backgrounds-main);
  color: var(--action-secondary--default);
  cursor: pointer;
  transition: background 0.15s;
}

.fdr-pagination button:hover:not(:disabled) {
  background: var(--action-tertiary--hover);
}

.fdr-pagination button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* No data — Zenith empty-state style */
.fdr-no-data {
  text-align: center;
  padding: 48px 24px;
  color: var(--text-secondary);
  font-size: 14px;
  font-weight: 400;
}

/* ============ Chart Panel ============ */

.fdr-chart-panel {
  display: none;
}

.fdr-chart-panel.visible {
  display: block;
}

.fdr-chart-controls {
  display: flex;
  gap: 16px;
  align-items: flex-end;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.fdr-chart-container {
  position: relative;
  width: 100%;
  max-width: 900px;
  height: 400px;
  background: var(--backgrounds-content-0);
  border: 1px solid var(--borders-general);
  border-radius: 8px;
}

.fdr-chart-container canvas {
  width: 100%;
  height: 100%;
}

/* ============ Utility ============ */

.fdr-hidden {
  display: none !important;
}

.fdr-mb-8 { margin-bottom: 8px; }
.fdr-mb-12 { margin-bottom: 12px; }
